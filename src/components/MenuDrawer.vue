<template>
  <v-navigation-drawer v-model="visibleDrawer" :width="300" location="right" temporary>
    <template #prepend>
      <div class="phone-chip">
        <svg t="1699240448390" class="icon" viewBox="0 0 1288 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4851" width="32" height="32"><path d="M394.421677 42.396903a584.48929 584.48929 0 0 0-286.984258 150.577549 112.590452 112.590452 0 0 0-37.623742 88.130064c0.644129 21.008516 0 41.438968 0 62.447484 0 42.611613 29.976774 70.044903 77.163355 70.044903h130.097549c49.746581 0 79.723355-26.277161 79.723354-71.795613a136.770065 136.770065 0 0 1 25.500904-80.532645 228.368516 228.368516 0 0 1 123.094709-89.30271 485.788903 485.788903 0 0 1 171.553033-17.507096 336.780387 336.780387 0 0 1 133.92929 28.589419c74.636387 35.608774 122.467097 88.146581 123.09471 169.25729 0 33.858065 33.808516 61.869419 71.432258 61.86942h140.387096c42.727226 0 72.670968-27.43329 72.670968-66.526968 0-21.603097-0.627613-43.189677 0-64.792774a116.356129 116.356129 0 0 0-40.811355-93.382194 589.295484 589.295484 0 0 0-266.586838-142.980129 1200.722581 1200.722581 0 0 0-266.586839-26.855226 1233.589677 1233.589677 0 0 0-250.004645 22.759226z m249.393549 568.452129c-79.079226 0-143.492129 58.368-143.492129 131.319742 0 71.779097 64.412903 131.319742 142.864516 131.319742 80.350968 0 143.492129-58.946065 143.492129-132.492387 0.049548-71.201032-65.090065-130.147097-142.881032-130.147097z m501.925161 222.373162a277.371871 277.371871 0 0 0-25.517419-123.738839 1263.896774 1263.896774 0 0 0-169.653678-270.864516 67.930839 67.930839 0 0 0-56.749419-25.682581c-8.935226 0-17.870452-0.578065-26.789161 0-6.391742 0-8.258065-1.75071-8.258065-7.580903 0-23.353806-0.644129-47.285677 0-70.622968a42.826323 42.826323 0 0 0-23.601548-40.266322 93.283097 93.283097 0 0 0-75.891613-8.753549c-30.620903 8.753548-44.015484 25.682581-44.015484 54.272 0 21.008516-0.644129 42.611613 0 63.620129 0 7.002839-1.271742 9.909677-10.206968 9.909678a4247.568516 4247.568516 0 0 0-123.094709 0c-9.562839 0-10.851097-2.923355-10.851097-10.520775 0-22.164645-0.644129-44.345806 0-66.526967a46.245161 46.245161 0 0 0-29.332645-44.940387 94.72 94.72 0 0 0-71.432258-5.830194 51.051355 51.051355 0 0 0-42.727226 53.693935v44.494452c0 9.348129 4.459355 22.181161-1.915871 27.43329a61.258323 61.258323 0 0 1-29.976774 1.75071 71.845161 71.845161 0 0 0-61.225291 29.729032c-7.646968 10.504258-15.310452 20.430452-22.329806 30.93471a1624.675097 1624.675097 0 0 0-142.864516 235.784258 262.788129 262.788129 0 0 0-28.705033 131.319742c0 36.764903 0.644129 62.447484 0.644129 93.382194 0 42.595097 30.604387 70.028387 76.535742 70.028387H643.79871q213.338839 0 426.661161-0.578065c44.593548 0 75.264-28.077419 75.264-68.872258 0-33.874581 1.899355-68.31071 0-101.574193z m-503.857548 105.604129c-117.991226-0.594581-214.296774-89.880774-213.652645-197.268646 0.644129-109.716645 98.221419-197.268645 218.756129-196.69058 116.702968 0.594581 212.380903 90.475355 211.736774 197.863226-0.644129 109.171613-97.57729 196.707097-216.840258 196.096z" fill="#2c2c2c" p-id="4852"></path></svg>
        <p>
          <span>联系电话</span>
          <span>135 7554 8422</span>
        </p>
      </div>
      <v-icon
        style="font-size: 20px;position: absolute;right: 20px;top: 20px;"
        icon="mdi-close"
        color="black"
        @click="visibleDrawer = false"
      />
    </template>
    <v-list :items="items" @click:select="handleMenu"></v-list>
  </v-navigation-drawer>
</template>

<script setup lang="ts">
import { emitterHeader, HeaderTabs, TabCheck } from '~/utils/eventbus';

interface MenuProps {
  event: PointerEvent;
  id: TabCheck | 'use';
  value: boolean;
  path: unknown[]
}

const emit = defineEmits(['onChangeMenu']);
const items = ref<HeaderTabs[]>([]);
const visibleDrawer = ref(false);

const handleMenu = (val: MenuProps) => {
  if (val.id === 'use') {
    window.open('https://saasjcjt.zjbdgs.com/');
  } else {
    emit('onChangeMenu', val.id);
  }
  visibleDrawer.value = false;
};

onMounted(() => {
  const keys = Array.from(emitterHeader.all.keys());
  if (keys.includes('click-menu')) emitterHeader.off('click-menu');
  emitterHeader.on('click-menu', val => {
    items.value = val();
    visibleDrawer.value = true;
  });
});
</script>

<style scoped lang="scss">
.phone-chip {
  width: 150px;
  display: flex;
  margin-top: 10px;
  margin-left: 10px;
  font-size: 14px;
  justify-content: space-between;
  align-items: center;
  p {
    margin-left: 10px;
    display: flex;
    flex-direction: column;
    :nth-child(2) {
      font-weight: bold;
      color: red;
    }
  }
}
</style>
