import{u as b,a as k}from"./useRequest.cde6ea3c.js";import{D as v,h as w,bB as y,bC as R,E as a,G as S}from"./entry.db0d2505.js";const q=()=>{const{loadingBtn:n,loading:r,setLoadingBtn:s}=b(!1),u=v(),c=w(()=>u.options.messageRef),i={username:[e=>e?!0:"用户名不能为空"],password:[e=>e?!0:"密码不能为空"]},m=y(),l=R("accessToken"),d=a(!1),p=a(""),t=S({username:"",password:""});return{username:p,rules:i,form:t,loading:r,loadingBtn:n,visible:d,handleSubmit:e=>{e.then(({valid:f})=>{if(f){s(!0);const{username:g,password:h}=t;k({url:"/api/auth/login",method:"post",body:{name:g,password:h}}).then(o=>{l.value=o.data.accessToken,c.value.showMsg({type:"success",message:o.message}),m.push("/manage")}).finally(()=>{s(!1)})}})}}};export{q as useLoginSetup};
